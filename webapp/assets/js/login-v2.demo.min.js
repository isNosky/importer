/*   
Template Name: Color Admin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.2
Version: 1.6.0
Author: Sean Ngu
Website: http://www.seantheme.com/color-admin-v1.6/admin/
*/

var handleLoginPageLoginRequest = function() {	
	$('#login-btn').click(function(){
		var data = {"username": $("#username").val(), "passwd": $("#password").val()};
		var reqdata=JSON.stringify(data);
		$.ajax({
			type:"post",
			url:"rs/login",
			dataType:"json",
			data:reqdata,
			contentType:"application/json",
			success:function(resp){
				if(null == resp){
					return;
				}
				switch(resp.errorcode){
					case 0:
						$.cookie('token', resp.token);
						$.cookie('username', $("#username").val());
						window.location.href = "call.html"
					break;
					case -1:
						alert("错误的用户名或者密码");
					break;
				}
			}
		});
	});
};
var LoginV2 = function() {
    "use strict";
    return {
        init: function() {
            handleLoginPageLoginRequest();
        }
    }
} ()